<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cps</title>
    <style>
        @import url('https://fonts.cdnfonts.com/css/noah-grotesque');
        @import url('https://fonts.cdnfonts.com/css/seven-segment');

        
        body {
            background: #151515;
            color: white;
            font-family: 'Noah Grotesque', sans-serif;
            text-shadow: 0 0 5px #fff, 0 0 10px #ffffffb2, 0 0 20px #e2e2e271, 0 0 30px #dbdbdb;
            overflow-y: hidden;
        }

        .sect {
            position: absolute;
            left: 0; 
            right: 0; 
            margin-inline: auto; 
            width: fit-content;
        }

        h1 {
            text-align: center;
            margin-top: 15vh;
            font-size: 50px;
        }


        #click {
            margin: auto;
            width: 570px;
            height: 35vh;
            border: 3px dashed white;
            border-radius: 20px;
            transition: .5s;
            position: relative;
            user-select: none;
        }

        #click:hover {
            border: 3px dashed white;
            border-radius: 50px;
            background: #202020;
        }

        #mask {
            height: 100%;
            width: 100%;
            clip-path: url(#roundedClip);
            position: relative;
            overflow: hidden;
        }

        #anim {
            background: radial-gradient(#151515, #151515, #525252);
            border-radius: 100%;
            border: 2px solid white;
            width: 200px;
            height: 200px;
            transform-origin: center;
            opacity: 0;
            position: absolute;
        }

        @keyframes anim {
            0% {transform: scale(0); opacity: 100%; border: 50px solid white; padding: 0px;}
            100% {transform: scale(1.5); opacity: 0%; border: 3px solid white; padding: 47px;}
        }

        #stats {
            text-align: center;
            user-select: none;
            margin: auto auto 50px auto;
            font-size: 40px;
            background: #201050;
            width: 550px;
            padding: 10px;
            border: 2px solid white;
            border-radius: 40px;
        }

        #debug {
            right: 5%;
            top: 3%;
            position: absolute;
            display: none;
        }

        nav {
            position: absolute;
            z-index: 999;
            float: left;
            top: 5vh;
            left: -270px;
            padding-right: 8%;
            transition: .6s cubic-bezier(0.16, 1, 0.3, 1);
            height: 100%;
        }

        nav:hover {
            left: -50px;
        }

        nav ul li {
            list-style-type: none;
            text-transform: uppercase;
            text-align: center;
            border: 2px solid white;
            padding: 5vh 35%;
            width: 50%;
            font-size: 25px;
            transition: .6s cubic-bezier(0.16, 1, 0.3, 1);
            cursor: pointer;
            user-select: none;
            background: linear-gradient(to right, #404040 50%, #303030 50%) repeat;
            background-position: -100% 0;
            background-size: 50%;
            filter: brightness(50%);
            text-shadow: none;
        }

        nav ul li:hover {
            filter: brightness(100%) !important;
            padding: 8vh 39%;
            background-position: 8% 0;
        }

        nav ul li:active {
            transition: .1s cubic-bezier(0.16, 1, 0.3, 1);
            padding: 6vh 25%;
        }

        @keyframes moveout {
            0% {transform: translateY(0%);}
            50% {transform: translateY(-110vh);}
            100% {transform: translateY(-110vh);}
        }

        @keyframes movein {
            0% {transform: translateY(110vh);}
            100% {transform: translateY(0);}
        }

        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
        }

        #calc {
            width: 60vw;
            display: flex;
            align-items: center;
            margin: auto;
            text-align: center;
        }

        @media only screen and (max-width: 1000px) {
            #calc {
            width: 100vw;
            display: flex;
            align-items: center;
            margin: auto;
            text-align: center;
            }
        }

        #calcInput {
            display: block;
            position: relative;
            right: 1vw;
            width: 100%;
            height: 100%;
            margin: auto;
            text-align: right;
            text-shadow: 0 0 6px #e2e2e2, 0 0 10px #dbdbdb;
            font-size: 400%;
            font-family: 'Seven Segment', sans-serif;
            background-color: transparent;
            border: none;
            outline: none;
        }

        .writePop {
            animation: writePop .15s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .slicePop {
            animation: slicePop .15s ease-in-out;
        }

        @keyframes writePop {
            0% {right: -25px;}
            100% {right: 1vw;}
        }
        
        @keyframes slicePop {
            0% {right: 2vw;}
            10% {right: -1px;}
            100% {right: 1vw;}
        }

        @keyframes ICtransition {
            0% {transform: translateY(0%);}
            50% {transform: translateY(-75%);}
            51% {transform: translateY(75%);}
            100% {transform: translateY(0%);}
        }

        @keyframes statePopIn {
            0% {left: -25px;}
            100% {left: 1%;}
        }
        @keyframes statePopOut {
            0% {left: 1%;}
            100% {left: -25px;}
        }

        #calcInputContainer {
            margin: auto;
            background-color: black;
            width: 49%;
            height: 10vh;
            border: 2px solid white;
            border-radius: 1vh;
            clip-path: inset(0% 0%);
            transition: .1s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
        }

        #calcInputContainer:active {
            width: 47.5%;
        } 

        .calcButton {
            width: 12%;
            height: 7vh;
            margin: .2vh 0;
            background: radial-gradient(#333333 10%, #000000 90%);
            text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #e2e2e2, 0 0 40px #dbdbdb;
            font-size: 160%;
            transition: .2s cubic-bezier(0.34, 1.56, 0.64, 1);
            border-radius: 1vh;
        }

        .calcButton:hover {
            transform: scale(1.05);
            text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #e2e2e2, 0 0 40px #dbdbdb;
        }
        
        .calcButton:active {
            transform: scale(.9);
        }

        #eql {
            filter: invert(100%);
            background: radial-gradient(#000000 30%, #ffffff 100%);
        }

        #C {     
            background: radial-gradient(#af0202 10%, #000000 90%);
        }
        
        .cNumB {
            background-color: #202020;
        }

        #calcState {
            position: absolute;
            top: 30%;
            left: 1%;
            font-family: 'Seven Segment', sans-serif;
            font-size: 200%;
        }
    </style>
</head>
<body>
    
    <nav>
        <ul>
            <li id="bcps">cps</li>
            <li id="bcalc">calc</li>
            <li id="bcs">coming soon</li>
            <li id="ep">fajne takie</li>
            <li id="rr">nothin ü§´</li>
        </ul>
    </nav>

    <div id="cps" class="sect">
        <h1 id="info">klikaj tam na dole i bedzie git</h1>

        <section id="stats">
            <span>CPS:</span>
            <span id="number">0</span>
            <span style="margin-left: 50px;">PB:</span>
            <span id="number2">0</span>
        </section>

        <div id="click">
            <div id="mask">
                <div id="anim"></div>
            </div>
        </div>

        <section id="debug">
            <span>delay between clicks:</span>
            <span id="number3">0</span> <br>
            <span>difference between delays (last 10s):</span>
            <span id="number4">0</span> <br>
        </section>

        <!--svg used as a mask cuz css clip-path is fuckin dumb-->
        <svg width="0" height="0">
            <defs>
            <clipPath id="roundedClip" clipPathUnits="objectBoundingBox">
                <rect x="0" y="0" width="1" height="1" rx="0.09" ry="0.18" />
            </clipPath>
            </defs>
        </svg>
    </div>

    <div id="calc" class="sect">
        <h1>kalkulalaltor (nie dziaua jeszcze wszystko)</h1>

        <div id="calcInputContainer"><input type="number" id="calcInput"><span id="calcState"></span></div>
        <button class="calcButton" id="C">C</button>
        <button class="calcButton" id=";3">;3</button>
        <button class="calcButton" id="lol">lol</button>
        <button class="calcButton" id="backspace">‚Üê</button>
        <br>
        <button class="calcButton" id="pwr">x¬≤</button>
        <button class="calcButton" id="sqrt">‚àö</button>
        <button class="calcButton" id="log">log</button>
        <button class="calcButton" id="divide">:</button>
        <br>
        <button class="calcButton cNumB" id="7">7</button>
        <button class="calcButton cNumB" id="8">8</button>
        <button class="calcButton cNumB" id="9">9</button>
        <button class="calcButton" id="multiply">x</button>
        <br>
        <button class="calcButton cNumB" id="4">4</button>
        <button class="calcButton cNumB" id="5">5</button>
        <button class="calcButton cNumB" id="6">6</button>
        <button class="calcButton" id="minus">-</button>
        <br>
        <button class="calcButton cNumB" id="1">1</button>
        <button class="calcButton cNumB" id="2">2</button>
        <button class="calcButton cNumB" id="3">3</button>
        <button class="calcButton" id="plus">+</button>
        <br>
        <button class="calcButton" id="pm">+/-</button>
        <button class="calcButton cNumB" id="0">0</button>
        <button class="calcButton" id="comma">.</button>
        <button class="calcButton" id="eql">=</button>

    </div>

    <div id="cs" class="sect">
        <h1>no i po chuj klikasz to jak pisze ze coming soon</h1>
    </div>

    <script>
        function setCookie(name, value, days = 3650) {
            let expires = "";
            if (days) {
                const date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));  // days in milliseconds
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + encodeURIComponent(value) + expires + "; path=/";
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const cookies = document.cookie.split(';');
            for (let cookie of cookies) {
                while (cookie.charAt(0) === ' ') cookie = cookie.substring(1);
                if (cookie.indexOf(nameEQ) === 0) {
                    return decodeURIComponent(cookie.substring(nameEQ.length));
                }
            }
            return null;
        }

        const cpsS = document.getElementById("cps");
        const calcS = document.getElementById("calc");
        const csS = document.getElementById("cs");
        const cpsB = document.getElementById("bcps");
        const calcB = document.getElementById("bcalc");
        const csB = document.getElementById("bcs");
        const ep = document.getElementById("ep");
        const rr = document.getElementById("rr");
        const click = document.getElementById("click");
        const mask = document.getElementById("mask");
        const cpsNum = document.getElementById("number");
        const pbNum = document.getElementById("number2");
        const delayNum = document.getElementById("number3");
        const avgdelayNum = document.getElementById("number4");

        const calcInput = document.getElementById("calcInput");
        let calcInputOverwrite = false;

        function maxlenght() {
            if (calcInput.value.length > 16) {
                calcInput.classList.remove("writePop");
                calcInput.value = calcInput.value.slice(0, 16);
            }
        }

        function inAnim() {
            calcInput.style.animation = "none";
            void calcInput.offsetWidth;
            calcInput.style.animation = "";
            calcInput.classList.add("writePop");
        }

        calcInput.oninput = function () {
            if(calcInputOverwrite) {
                let inputt = calcInput.value.slice(-1);
                setTimeout(() => calcInput.value = inputt, 10)
                calcInputOverwrite = false;
            }
            maxlenght();
            inAnim();
        }

        function IfOneInCalcInput() {
            // Access the first stylesheet
            const styleSheet = document.styleSheets[0];

            // Find and update the keyframe rule
            for (const rule of styleSheet.cssRules) {
            if (rule.type === CSSRule.KEYFRAMES_RULE && rule.name === 'writePop') {
                rule.cssRules[0].style.right = '-10px'; // Update the 0% keyframe
                break;
            }
            }
        }

        calcInput.addEventListener("animationstart", () => {
            if(calcInput.value % 10==1){
                IfOneInCalcInput();
            }
        });
        
        const calcMeow = document.getElementById(";3");
        var cps = 0;
        var pb = parseInt(getCookie("pb")) || 0;
        pbNum.textContent = pb;
        var crazy = false;
        let startTime = new Date();
        let endTime = new Date();
        let clicksTen = 0;
        let delayTen = 0;
        let timeElapsed = 0;
        let _timeElapsed = 0;

        cpsS.style.display = 'none';
        calcS.style.display = 'block';
        csS.style.display = 'none';
        var currentS = calcS;

        function moveElementToMouse(event) {
            cps += 1;
            cpsNum.textContent = cps;
            clicksTen += 1;
            setTimeout(() => {
            clicksTen -= 1;
            }, 10000);
            var endTime = new Date();
            timeElapsed = endTime - startTime;
            delayTen += Math.abs(timeElapsed-_timeElapsed);
            var _delayDifference = Math.abs(timeElapsed-_timeElapsed);
            _timeElapsed = timeElapsed;
            setTimeout(() => {
            delayTen -= _delayDifference;
            }, 10000);
            delayNum.textContent = timeElapsed;
            avgdelayNum.textContent = Math.round(delayTen/clicksTen);
            if(Math.round(delayTen/clicksTen)<3) {
                document.getElementById('info').textContent = "ale nie na autoclickerze debilu XD";
            } else { 
                document.getElementById('info').textContent = "klikaj tam na dole i bedzie git";
            }
            startTime = new Date();
            setTimeout(() => {
            cps = cps-1;
            cpsNum.textContent = cps
            }, 1000);

            if(pb<cps) {
                pb = cps;
                pbNum.textContent = pb;
                setCookie("pb", pb);
            }

            if(cps>9) {
                crazy = true;
            }

            
            // to ai mi pisalo w sensie samo to klonowanie bo animacja autorska >>

            // Clone the `anim` element
            const animClone = document.getElementById("anim").cloneNode(true);
            
            // Get the `click` element's bounding box to position the clone relative to it
            const clickRect = click.getBoundingClientRect();

            // Position and style the clone
            animClone.style.position = "absolute";
            animClone.style.left = `${event.clientX - clickRect.left - 150}px`; // Center horizontally
            animClone.style.top = `${event.clientY - clickRect.top - 150}px`; // Center vertically
            animClone.style.opacity = "100%";
            animClone.style.animation = "anim .6s ease-out";
            if(crazy==true) {
                var color = `hsl(${Math.random()*360}, 100%, 50%, 50%)`
                animClone.style.background = color;
            };

            // Append the clone to the `mask` div to apply clipping
            mask.appendChild(animClone);

            // Remove the clone once the animation ends
            animClone.addEventListener("animationend", () => {
                animClone.remove();
            }, { once: true });
        }
        // << do tego miejsca ai modified code

        let animating = false;
        let pendingChange = "";

        function change(S) {
            if(S==currentS) {
                return;
            }

            if(animating==true) {
                pendingChange = S;
                return;
            }

            animating = true;
            setTimeout(() => {
                animating = false
                if (pendingChange != "") {
                    change(pendingChange)
                }
                pendingChange = "";
            }, 610)
            currentS.style.animation = 'moveout 2s cubic-bezier(0.16, 1, 0.3, 1)';
            _currentS=currentS;
            setTimeout(() => _currentS.style.display = 'none', 600)
            currentS = S;
            setCookie("section", currentS);
            S.style.display = 'block';
            S.style.animation = 'movein .6s cubic-bezier(0.16, 1, 0.3, 1)';

            switch(currentS) {
                case cpsS:
                    cpsB.style.filter = 'brightness(100%)'
                    calcB.style.filter = 'brightness(50%)'
                    csB.style.filter = 'brightness(50%)'
                    cpsB.style.textShadow = '0 0 10px #fff, 0 0 20px #fff, 0 0 30px #e2e2e2, 0 0 40px #dbdbdb'
                    calcB.style.textShadow = ''
                    csB.style.textShadow = ''
                    break;
                case calcS:
                    calcB.style.filter = 'brightness(100%)'
                    cpsB.style.filter = 'brightness(50%)'
                    csB.style.filter = 'brightness(50%)'
                    calcB.style.textShadow = '0 0 10px #fff, 0 0 20px #fff, 0 0 30px #e2e2e2, 0 0 40px #dbdbdb'
                    cpsB.style.textShadow = ''
                    csB.style.textShadow = ''
                    break;
                case csS:
                    csB.style.filter = 'brightness(100%)'
                    cpsB.style.filter = 'brightness(50%)'
                    calcB.style.filter = 'brightness(50%)'
                    csB.style.textShadow = '0 0 10px #fff, 0 0 20px #fff, 0 0 30px #e2e2e2, 0 0 40px #dbdbdb'
                    cpsB.style.textShadow = ''
                    calcB.style.textShadow = ''
                    break;  
            }
        }
        
        click.addEventListener('click', moveElementToMouse);

        document.addEventListener('keyup', function (event) {
            if (event.ctrlKey && event.altKey && event.key === 'd') {
                
                var element = document.getElementById('debug');
                if (element.style.display = 'none') {
                    element.style.display = 'block';
                } else {
                    element.style.display = 'none';
                }
            }
        });

        cpsB.addEventListener('click', () => change(cpsS));
        calcB.addEventListener('click', () => change(calcS));
        csB.addEventListener('click', () => change(csS));
        ep.addEventListener('click', () => window.open('https://xtimgg.github.io/meow/', '_blank').focus);
        rr.addEventListener('click', () => window.open('https://bitly.com/98K8eH', '_blank').focus);

        document.getElementById('lol').addEventListener('click', () => calcInput.value = 69);        
        calcMeow.addEventListener('click', () => {
            switchAnim();
            setTimeout(() => {calcInput.type = "text"; calcInput.value = "meow ;3";}, 150)
            setTimeout(() => {
                switchAnim();
                setTimeout(() => calcInput.type = "number", 150)
            }, 800)
        });

        let addComma = false;
        document.getElementById('comma').addEventListener('click', () => addComma = true);


        calcInput.addEventListener("animationend", () => {
            calcInput.classList.remove("writePop");
            calcInput.classList.remove("slicePop");
        });

        function calcBF(num) {
            document.getElementById(num).addEventListener('click', () => {
                if(calcInputOverwrite) {
                    calcInput.value = "";
                    calcInputOverwrite = false;
                }
                if (!addComma) {
                    calcInput.value += num;
                    inAnim();
                } else {
                    calcInput.value += '.' + num;
                    addComma = false;
                    inAnim();
                }   
                maxlenght();
            });
        }

        for (let i = 0; i <= 9; i++) {
            calcBF(i);
        }


        function switchAnim() {
            calcInput.style.animation = "none";
            void calcInput.offsetWidth;
            calcInput.style.animation = "";
            calcInput.style.animation = `ICtransition .3s cubic-bezier(.98,-0.64,.1,1.63)`
        }

        document.getElementById('pm').addEventListener('click', () => {calcInput.value *= -1, inAnim();});

        document.getElementById('sqrt').addEventListener('click', () => {
            switchAnim();
            setTimeout(() => {calcInput.value = Math.sqrt(calcInput.value); maxlenght();}, 150)
        });

        document.getElementById('pwr').addEventListener('click', () => {
            switchAnim();
            setTimeout(() => {calcInput.value *= calcInput.value; maxlenght();}, 150)
        });

        document.getElementById('log').addEventListener('click', () => {
            switchAnim();
            setTimeout(() => {calcInput.value = Math.log(calcInput.value); maxlenght();}, 150)
        });
        
        document.getElementById('C').addEventListener('click', () => {
            switchAnim();
            outAnimS()
            calcState = "";
            setTimeout(() => calcSt.textContent = "", 150)
            setTimeout(() => calcInput.value = "", 100)
        });
        

        let firstValue = 0;
        let calcState = "";
        calcSt = document.getElementById('calcState');

        
        function inAnimS() {
            calcSt.style.animation = "none";
            void calcSt.offsetWidth;
            calcSt.style.animation = "";
            calcSt.style.animation = "statePopIn .15s cubic-bezier(0.34, 1.56, 0.64, 1)";
        }
        
        function outAnimS() {
            calcSt.style.animation = "none";
            void calcSt.offsetWidth;
            calcSt.style.animation = "";
            calcSt.style.animation = "statePopOut .15s cubic-bezier(.98,-0.64,.1,1.63)";
        }

        function equal(n=false) {
            if(n) {
                switchAnim();
                if(calcState=="addition") {
                    setTimeout(() => calcInput.value = Number(firstValue) + Number(calcInput.value), 150)
                } else if(calcState=="substract") {
                    setTimeout(() => calcInput.value = Number(calcInput.value) - Number(firstValue), 150)
                } else if(calcState=="multiply") {
                    setTimeout(() => calcInput.value = Number(firstValue) * Number(calcInput.value), 150)
                } else if(calcState=="divide") {
                    setTimeout(() => calcInput.value = Number(calcInput.value) / Number(firstValue), 150)
                }
                calcInputOverwrite = true;
            } else {
                inAnim();
                if(calcState=="addition") {
                    calcInput.value = Number(firstValue) + Number(calcInput.value);
                } else if(calcState=="substract") {
                    calcInput.value = Number(firstValue) - Number(calcInput.value);
                } else if(calcState=="multiply") {
                    calcInput.value = Number(firstValue) * Number(calcInput.value);
                } else if(calcState=="divide") {
                    calcInput.value = Number(firstValue) / Number(calcInput.value);
                }
                calcInputOverwrite = true;
            }
        }

        document.getElementById('plus').addEventListener('click', () => {
            if(calcState != ""){
                equal();
                firstValue = 0;
                result = calcInput.value
            } else {
                result = "";
                switchAnim();
            }
            firstValue = calcInput.value;
            setTimeout(() => {calcInput.value = result}, 150)
            calcState = "addition";
            inAnimS();
            calcSt.textContent = "+";
        });
        
        document.getElementById('minus').addEventListener('click', () => {
            if(calcState != ""){
                equal();
                firstValue = 0;
                result = calcInput.value
            } else {
                result = "";
                switchAnim();
            }
            firstValue = calcInput.value;
            setTimeout(() => {calcInput.value = result}, 150)
            calcState = "substract";
            inAnimS();
            calcSt.textContent = "-";
        });
        
        document.getElementById('multiply').addEventListener('click', () => {
            if(calcState != ""){
                equal();
                firstValue = 0;
                result = calcInput.value
            } else {
                result = "";
                switchAnim();
            }
            firstValue = calcInput.value;
            setTimeout(() => {calcInput.value = result}, 150)
            calcState = "multiply";
            inAnimS();
            calcSt.textContent = "x";
        });
        
        document.getElementById('divide').addEventListener('click', () => {
            if(calcState != ""){
                equal();
                firstValue = 0;
                result = calcInput.value
            } else {
                result = "";
                switchAnim();
            }
            firstValue = calcInput.value;
            setTimeout(() => {calcInput.value = result}, 150)
            calcState = "divide";
            inAnimS();
            calcSt.textContent = ":";
        });
        

        document.getElementById('eql').addEventListener('click', () => {
            equal(true);
        });

        document.getElementById('backspace').addEventListener('click', () => {
            calcInput.style.animation = "none";
            void calcInput.offsetWidth;
            calcInput.style.animation = "";
            calcInput.classList.add("slicePop");
            if (calcInput.value.slice(-2, -1) === ".") {
                calcInput.value = calcInput.value.slice(0, -2);
            } else {
                calcInput.value = calcInput.value.slice(0, -1);
            }
        });
    </script>
</body>
</html>
